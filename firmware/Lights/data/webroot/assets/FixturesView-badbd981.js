import{B as q,D as k,s as O,o as h,c as m,a as u,m as b,b as w,_ as J,r as E,u as G,d as Q,e as Z,f as y,g as B,F as P,h as N,i as g,w as c,j as C,t as H,k as A,l as $,n as _,p as ee,q as te,v as ne}from"./index-b7680564.js";var ae={handle:{position:"absolute"},range:{position:"absolute"}},ie={root:function(e){var n=e.props;return["p-slider p-component",{"p-disabled":n.disabled,"p-slider-horizontal":n.orientation==="horizontal","p-slider-vertical":n.orientation==="vertical"}]},range:"p-slider-range",handle:"p-slider-handle"},re=q.extend({name:"slider",classes:ie,inlineStyles:ae}),se={name:"BaseSlider",extends:O,props:{modelValue:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:re,provide:function(){return{$parentInstance:this}}};function le(t){return he(t)||de(t)||ue(t)||oe()}function oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(t,e){if(t){if(typeof t=="string")return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}}function de(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function he(t){if(Array.isArray(t))return T(t)}function T(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var z={name:"Slider",extends:se,inheritAttrs:!1,emits:["update:modelValue","change","slideend"],dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var e=this.$el.getBoundingClientRect();this.initX=e.left+k.getWindowScrollLeft(),this.initY=e.top+k.getWindowScrollTop(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue:function(e){var n,a=e.touches?e.touches[0].pageX:e.pageX,s=e.touches?e.touches[0].pageY:e.pageY;this.orientation==="horizontal"?n=(a-this.initX)*100/this.barWidth:n=(this.initY+this.barHeight-s)*100/this.barHeight;var i=(this.max-this.min)*(n/100)+this.min;if(this.step){var r=this.range?this.value[this.handleIndex]:this.value,p=i-r;p<0?i=r+Math.ceil(i/this.step-r/this.step)*this.step:p>0&&(i=r+Math.floor(i/this.step-r/this.step)*this.step)}else i=Math.floor(i);this.updateModel(e,i)},updateModel:function(e,n){var a=parseFloat(n.toFixed(10)),s;this.range?(s=this.value?le(this.value):[],this.handleIndex==0?(a<this.min?a=this.min:a>=this.max&&(a=this.max),s[0]=a):(a>this.max?a=this.max:a<=this.min&&(a=this.min),s[1]=a)):(a<this.min?a=this.min:a>this.max&&(a=this.max),s=a),this.$emit("update:modelValue",s),this.$emit("change",s)},onDragStart:function(e,n){this.disabled||(this.$el.setAttribute("data-p-sliding",!0),this.dragging=!0,this.updateDomData(),this.range&&this.value[0]===this.max?this.handleIndex=0:this.handleIndex=n,e.currentTarget.focus(),e.preventDefault())},onDrag:function(e){this.dragging&&(this.setValue(e),e.preventDefault())},onDragEnd:function(e){this.dragging&&(this.dragging=!1,this.$el.setAttribute("data-p-sliding",!1),this.$emit("slideend",{originalEvent:e,value:this.value}))},onBarClick:function(e){this.disabled||k.getAttribute(e.target,"data-pc-section")!=="handle"&&(this.updateDomData(),this.setValue(e))},onMouseDown:function(e,n){this.bindDragListeners(),this.onDragStart(e,n)},onKeyDown:function(e,n){switch(this.handleIndex=n,e.code){case"ArrowDown":case"ArrowLeft":this.decrementValue(e,n),e.preventDefault();break;case"ArrowUp":case"ArrowRight":this.incrementValue(e,n),e.preventDefault();break;case"PageDown":this.decrementValue(e,n,!0),e.preventDefault();break;case"PageUp":this.incrementValue(e,n,!0),e.preventDefault();break;case"Home":this.updateModel(e,this.min),e.preventDefault();break;case"End":this.updateModel(e,this.max),e.preventDefault();break}},decrementValue:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s;this.range?this.step?s=this.value[n]-this.step:s=this.value[n]-1:this.step?s=this.value-this.step:!this.step&&a?s=this.value-10:s=this.value-1,this.updateModel(e,s),e.preventDefault()},incrementValue:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s;this.range?this.step?s=this.value[n]+this.step:s=this.value[n]+1:this.step?s=this.value+this.step:!this.step&&a?s=this.value+10:s=this.value+1,this.updateModel(e,s),e.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{value:function(){var e;if(this.range){var n,a,s,i;return[(n=(a=this.modelValue)===null||a===void 0?void 0:a[0])!==null&&n!==void 0?n:this.min,(s=(i=this.modelValue)===null||i===void 0?void 0:i[1])!==null&&s!==void 0?s:this.max]}return(e=this.modelValue)!==null&&e!==void 0?e:this.min},horizontal:function(){return this.orientation==="horizontal"},vertical:function(){return this.orientation==="vertical"},rangeStyle:function(){if(this.range){var e=this.rangeEndPosition>this.rangeStartPosition?this.rangeEndPosition-this.rangeStartPosition:this.rangeStartPosition-this.rangeEndPosition,n=this.rangeEndPosition>this.rangeStartPosition?this.rangeStartPosition:this.rangeEndPosition;return this.horizontal?{left:n+"%",width:e+"%"}:{bottom:n+"%",height:e+"%"}}else return this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:(this.value-this.min)*100/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]?(this.value[0]<this.min?0:this.value[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value.length===2?(this.value[1]>this.max?100:this.value[1]-this.min)*100/(this.max-this.min):100},rangeStartHandleStyle:function(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},fe=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],me=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"],ve=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation"];function ge(t,e,n,a,s,i){return h(),m("div",b({class:t.cx("root"),onClick:e[15]||(e[15]=function(){return i.onBarClick&&i.onBarClick.apply(i,arguments)})},t.ptmi("root"),{"data-p-sliding":!1}),[u("span",b({class:t.cx("range"),style:[t.sx("range"),i.rangeStyle]},t.ptm("range")),null,16),t.range?w("",!0):(h(),m("span",b({key:0,class:t.cx("handle"),style:[t.sx("handle"),i.handleStyle],onTouchstartPassive:e[0]||(e[0]=function(r){return i.onDragStart(r)}),onTouchmovePassive:e[1]||(e[1]=function(r){return i.onDrag(r)}),onTouchend:e[2]||(e[2]=function(r){return i.onDragEnd(r)}),onMousedown:e[3]||(e[3]=function(r){return i.onMouseDown(r)}),onKeydown:e[4]||(e[4]=function(r){return i.onKeyDown(r)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("handle")),null,16,fe)),t.range?(h(),m("span",b({key:1,class:t.cx("handle"),style:[t.sx("handle"),i.rangeStartHandleStyle],onTouchstartPassive:e[5]||(e[5]=function(r){return i.onDragStart(r,0)}),onTouchmovePassive:e[6]||(e[6]=function(r){return i.onDrag(r)}),onTouchend:e[7]||(e[7]=function(r){return i.onDragEnd(r)}),onMousedown:e[8]||(e[8]=function(r){return i.onMouseDown(r,0)}),onKeydown:e[9]||(e[9]=function(r){return i.onKeyDown(r,0)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue?t.modelValue[0]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("startHandler")),null,16,me)):w("",!0),t.range?(h(),m("span",b({key:2,class:t.cx("handle"),style:[t.sx("handle"),i.rangeEndHandleStyle],onTouchstartPassive:e[10]||(e[10]=function(r){return i.onDragStart(r,1)}),onTouchmovePassive:e[11]||(e[11]=function(r){return i.onDrag(r)}),onTouchend:e[12]||(e[12]=function(r){return i.onDragEnd(r)}),onMousedown:e[13]||(e[13]=function(r){return i.onMouseDown(r,1)}),onKeydown:e[14]||(e[14]=function(r){return i.onKeyDown(r,1)}),tabindex:t.tabindex,role:"slider","aria-valuemin":t.min,"aria-valuenow":t.modelValue?t.modelValue[1]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-orientation":t.orientation},t.ptm("endHandler")),null,16,ve)):w("",!0)],16)}z.render=ge;const S=t=>(te("data-v-a2fe74ed"),t=t(),ne(),t),ce={class:"swatch-container"},pe={class:"flex"},be={style:{width:"40px",display:"inline-block","text-align":"center"}},ye={style:{padding:"5px","text-align":"left",color:"#888"}},we={id:"buttonpanel"},Se=S(()=>u("i",{class:"pi pi-save",style:{"font-size":"1.5rem"}},null,-1)),De=S(()=>u("i",{class:"pi pi-trash",style:{"font-size":"1.5rem"}},null,-1)),Le=S(()=>u("i",{class:"pi pi-plus-circle",style:{"font-size":"1.5rem"}},null,-1)),Ee=S(()=>u("span",{class:"p-text-secondary block mb-5"},"Enter a new name",-1)),xe={class:"flex align-items-center gap-3 mb-3"},Ve=S(()=>u("label",{for:"colorSetName",class:"font-semibold w-6rem"},"Name",-1)),ke={class:"flex justify-content-end gap-2"},Pe={__name:"FixturesView",setup(t){const e=E([{name:"Random",levels:[100,100,20,33,0,100,50,60,70,90,100,100]},{name:"Dull",levels:[2,2,2,3,0,55,1,2,3,4,6,7]}]),n=E(0),a=E(!1),s=E(!1);var i=null;const r=G(),p=Q();let x=!1,D;function j(l,o=1e3){const d=()=>{D==null?x=!1:(l(...D),D=null,setTimeout(d,o))};return(...L)=>{if(x){D=L;return}l(...L),x=!0,setTimeout(d,o)}}function U(l){a.value=!0,y.put(`${window.device_url}api/channel/${l}/${e.value[n.value].levels[l]}`)}function K(l){a.value?r.require({message:"Wenn du weitermachst gehen die Einstellungen erloren. Bist du sicher?",header:"Ungesicherte Änderungen",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Nein",acceptLabel:"Ja",accept:()=>{M(l)},reject:()=>{}}):M(l)}function M(l){a.value=!1,y.get(window.device_url+"api/scene/load/"+l,{timeout:5e3}),n.value=l}function F(){e.value.push({name:"Off",levels:[0,0,0,0,0,0,0,0,0,0,0,0]}),a.value=!0,n.value=e.value.length-1}function W(){r.require({message:"Are you sure you want to proceed?",header:"Delete Scene?",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Delete",accept:()=>{e.value.splice(n.value,1),n.value=n.value-1,a.value=!0},reject:()=>{}})}function X(){i=e.value[n.value].name,s.value=!0,a.value=!0,setTimeout(()=>{document.getElementById("colorSetName").focus()},100)}function Y(){e.value[n.value].name=i,s.value=!1}function R(){y.put(window.device_url+"api/scenes",{params:e.value,timeout:2e3}).then(function(l){console.log(l),p.add({severity:"success",summary:"Scenes updated",life:1e3}),a.value=!1}).catch(function(l){console.log(l),p.add({severity:"error",summary:"An error occured",detail:l,life:4e3})})}function I(){y.get(window.device_url+"api/status",{timeout:2e3}).then(function(l){n.value=l.data.scene}),setTimeout(I,2e3)}return Z(()=>{y.get(window.device_url+"api/scenes",{timeout:5e3}).then(function(l){try{var o=l.data[0].levels.length;o>5&&(e.value=l.data,I())}catch(d){p.add({severity:"error",summary:"An error occured",detail:d,life:4e3})}})}),(l,o)=>{const d=B("Button"),L=B("InputText");return h(),m(P,null,[u("div",ce,[u("div",pe,[(h(!0),m(P,null,N(e.value[n.value].levels,(f,v)=>(h(),m("div",be,[g(C(z),{orientation:"vertical",modelValue:e.value[n.value].levels[v],"onUpdate:modelValue":V=>e.value[n.value].levels[v]=V,onChange:V=>{(function(){j(U,40)(v)})()},style:{height:"255px",padding:"30%"}},null,8,["modelValue","onUpdate:modelValue","onChange"]),u("div",ye,H(v+1),1)]))),256))]),u("div",we,[(h(!0),m(P,null,N(e.value,(f,v)=>(h(),A(d,{onClick:V=>K(v),onDblclick:X,style:{width:"99%",margin:"2px"},severity:n.value==v?"info":"secondary"},{default:c(()=>[$(H(f.name),1)]),_:2},1032,["onClick","severity"]))),256))])]),g(C(_),null,{start:c(()=>[g(d,{disabled:!a.value,onClick:o[0]||(o[0]=f=>R()),severity:"secondary"},{default:c(()=>[Se]),_:1},8,["disabled"])]),end:c(()=>[n.value>-1?(h(),A(d,{key:0,onClick:W,severity:"secondary"},{default:c(()=>[De]),_:1})):w("",!0),e.value.length<11?(h(),A(d,{key:1,onClick:F,severity:"secondary"},{default:c(()=>[Le]),_:1})):w("",!0)]),_:1}),g(C(ee),{visible:s.value,"onUpdate:visible":o[4]||(o[4]=f=>s.value=f),modal:"",header:"Edit colorSetName",style:{width:"25rem"}},{default:c(()=>[Ee,u("div",xe,[Ve,g(L,{ref:"inputRef",id:"colorSetName",modelValue:e.value[n.value].name,"onUpdate:modelValue":o[1]||(o[1]=f=>e.value[n.value].name=f),class:"flex-auto",autocomplete:"off"},null,8,["modelValue"])]),u("div",ke,[g(d,{type:"button",label:"Cancel",severity:"secondary",onClick:o[2]||(o[2]=f=>Y())}),g(d,{type:"button",label:"Save",onClick:o[3]||(o[3]=f=>s.value=!1)})])]),_:1},8,["visible"])],64)}}},Ae=J(Pe,[["__scopeId","data-v-a2fe74ed"]]);export{Ae as default};
