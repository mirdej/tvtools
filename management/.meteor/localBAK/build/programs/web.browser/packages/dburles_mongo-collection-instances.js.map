)]}'
{"version":3,"sources":["dburles:mongo-collection-instances/mongo-instances.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mB;;AAEA,wD;AACA,kB;AACA,e;AACA,mB;AACA,oB;AACA,K;AACA,G;;AAEA,gD;AACA,0B;AACA,yD;AACA,2B;AACA,sC;AACA,6G;AACA,kC;AACA,K;;AAEA,2C;AACA,E;;AAEA,sC;AACA,mB;AACA,E;;AAEA,oF;AACA,qC","file":"/packages/dburles:mongo-collection-instances.js","sourcesContent":["var instances = [];\n\nMeteor.addCollectionExtension(function (name, options) {\n  instances.push({\n    name: name,\n    instance: this,\n    options: options\n  });\n});\n\nMongo.Collection.get = function(name, options) {\n  options = options || {};\n  var collection = _.find(instances, function(instance) {\n    if (options.connection)\n      return instance.name === name &&\n        instance.options && instance.options.connection._lastSessionId === options.connection._lastSessionId;\n    return instance.name === name;\n  });\n\n  return collection && collection.instance;\n};\n\nMongo.Collection.getAll = function() {\n  return instances;\n};\n\n// Meteor.Collection will lack ownProperties that are added back to Mongo.Collection\nMeteor.Collection = Mongo.Collection;"]}